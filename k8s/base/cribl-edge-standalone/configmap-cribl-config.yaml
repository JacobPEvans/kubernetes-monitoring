apiVersion: v1
kind: ConfigMap
metadata:
  name: cribl-edge-standalone-config
  namespace: monitoring
data:
  outputs.yml: |
    outputs:
      stream-hec:
        type: splunk_hec
        url: "http://cribl-stream-standalone:8088/services/collector"
        token: "edge-internal"
        index: claude
        source: cribl-edge-standalone
        sourcetype: "claude:code:session"
        rejectUnauthorized: false
        compress: false
        concurrency: 5
        maxPayloadSizeKB: 4096
        onBackpressure: block
        pqEnabled: true
        pqMaxSize: "5GB"
        pqPath: /opt/cribl/data/pq
      default:
        type: default
        defaultId: stream-hec
  inputs-override.yml: |
    inputs:
      claude-code-logs:
        disabled: false
        sendToRoutes: true
        type: file
        mode: manual
        interval: 10
        recurse: true
        path: "__CLAUDE_HOME__/.claude/projects/"
        filenames:
          - "*.jsonl"
        metadata:
          - name: datatype
            value: "'claude-code'"
